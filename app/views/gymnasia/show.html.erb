<h4 class="gymItem"><%= gym.name %> with <%= (gym.maxUsers - gym.currentUsers) %> spot(s) still available</h4>
<div class="row">
  <div class="col s12 m6">
    <ul class="collection with-header">
      <li class="collection-header"><h5>Timeslots</h5></li>
      <% for i in 0..23 do
           timeslot = timeslots.find {|t| t.hour == i} %>
        <li class="collection-item timeslot-item valign-wrapper">
          <div><span class="hour"><%= i %>:00 to <%= i + 1 %>:00</span><br/>
            <%= timeslot ? timeslot.total_reservations || 0 : 0 %> registered users
          </div>
          <% if timeslot.present? %>
            <%= form_tag("/reservation", method: "post") do %>
              <%= hidden_field_tag(:timeslot_id, timeslot.id) %>
              <button class="waves-effect waves-teal btn" type="submit" name="commit">
                <i class="material-icons inline-icon">event</i> Register
              </button>
            <% end %>
          <% else %>
            <%= form_tag("/reservation", method: "post") do %>
              <%= hidden_field_tag(:hour, i) %>
              <%= hidden_field_tag(:gymnasia_id, gym.id) %>
              <button class="waves-effect waves-teal btn" type="submit" name="commit">
                <i class="material-icons inline-icon">event</i> Register
              </button>
            <% end %>
          <% end %>
        </li>
      <% end %>
    </ul>
  </div>
</div>